# Introduction 
Aeropaye is an escrow flight refund system for canceled or delayed flight.

# Getting Started
There are 3 user role on the platform escrow
1. Aeropaye Admin
2. Airliners
3. Passengers

# Registration Process
## Airline
1. Airline blockchain account is created and whitelisted => Operations.SetUserList
2. Aeropaye Admin elevates Airline account to Airline 'Role' account => Operations.AddAirline
3. Airline creates refund policies for canceled flight(if airline cancels), canceled booking(if passenger cancels), delayed flight in decimal of percentage => Operations.SetRefunds
4. To get refund policies or amount => Operations.GetRefunds

## Passengers
1. Passenger blockchain account is created and whitelisted => Operations.SetUserList
2. To blacklist a user => Operations.AddBlackList
3. Remove from blacklist => Operations.RemoveBlackList

# Aeropaye Token
1. Passengers pays for Aeropaye token via their CC or any other means 
2. Equivalent token amount is minted to the address of the Passenger in dollars rate => ERC20Token.issue
3. To redeem a token after a user has withdrawn from the escrow wallet => ERC20Token.GetRefunds

# Escrow Wallet
The wallet is a pool of funds for airline and passengers. The Passengers transfer their token to the escrow for flight.
1. Airline creates a Flight Schedule from Frontend and an Escrow wallet representing the flight is autogenerated => Aeropaye.escrowCreation
2. Passengers send in their fund/token to the generated escrow wallet => Passengers.transferToEscrow
3. System takes note of amount being sent in by each passenger => Getters.getPassenger
4. Get total passengers in an escrow flight => Getters.getEscrowPassengerCount
4. Airline withdraws Passengers Booking Fee from the Escrow => Aeropaye.airlineClaimBookingFee

## Airline Cancels or Switch Escrow to Delayed Flight Scenario
1. Airline updates escrow flight wallet to canceled, delayed => Aeropaye.cancelFlight
2. Passengers to claim flight cost balance => Passengers.passengerClaim

## Passenger Cancels Flight
1. Passenger cancels Flight => Passengers.cancelBooking
2. Passengers to reclaim flight cost balance => Passengers.passengerClaim

## Aeropaye Owner Address
1. See the balance sent to Aeropaye owner address for transaction fees. => ERC20Token.balanceOf

# Passenger CheckIn
1. For Passengers to checkIn and loose right to withdraw token from escrow => Passengers.checkIn

# Airline withdraw fund of Escrow Flight completed
1. To withdraw funds of Checked-In passenger from the Escrow =>Aeropaye.airlineClaimFlightFee

# Flight Complete
1. To mark an escrow flight as completed. => Aeropaye.completeFlight

# Getters
1. To get Escrow flight details => Getters.getEscrowDetails
2. Get passenger's flight details => Getters.getPassengerFlightDetail
3. Total amount in created Escrow => Getters.getEscrowTotal
4. Get total passengers in escrow => Getters.getEscrowPassengerCount
5. Amount paid by passenger for escrow => Getters.getPassenger
6. Get total token claimed by Passengers from Escrow => Getters.getEscrowTotalClaimed
7. Get claimable booking fee by Passenger => Getters.claimableBookingRefund
8. Get Escrow balance => Getters.getEscrowBalance


# ToDos
1. ~Check booking fee withdraw by Airline~
2. ~Withdraw flight fee by Passengers~
3. Withdraw flight fee by Airline
4. ~Cancel booking by Passengers~
5. Cancel flight by Airline

